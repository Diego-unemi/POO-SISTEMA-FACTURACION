<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Sistema Web Facturación</title>
  <link rel="stylesheet" href="assets/css/main.css">
</head>

<body>
  <button style="margin-left: -17%; "><a href="index.html" style="background-color: transparent; color:black"> ←
      Atras</a></button>


  <div class="control-bar">

    <div class="container">

      <div class="row">

        <div class="col-2-4">
          <div class="slogan">Facturación </div>

          <label for="config_tax">IVA:
            <input type="checkbox" id="config_tax" />
          </label>
          <label for="config_tax_rate" class="taxrelated">Tasa:
            <input type="text" id="config_tax_rate" value="12" />%
          </label>
          <label for="config_note">Nota:
            <input type="checkbox" id="config_note" />
          </label>

        </div>
        <div class="col-4 text-right">
          <a href="javascript:window.print()">Imprimir</a>
        </div><!--.col-->
      </div><!--.row-->
    </div><!--.container-->
  </div><!--.control-bar-->



  <header class="row" style="margin-top: -30px;">
    <div class="logoholder text-center">
      <img src="sales_invoices/assets/img/OIG4.jpeg">
    </div><!--.logoholder-->

    <div class="me">
      <p>
        <strong style="font-size: 13px;">Sistema Web Facturación</strong><br>KM 1.5 vía Milagro
        Dr. Rómulo Minchala.<br>
        Ecuador.<br>

      </p>
    </div><!--.me-->

    <div class="info">
      <p>
      <p style="font-weight: bold; font-size: 13px;">Sitio Web ⬇</p><a
        href="http://127.0.0.1:5501/index.html">www.Sist.WebFacturacion.com</a><br>
      <p style="font-weight: bold; font-size: 13px;">Email ⬇</p><a
        href="mailto:equinterosp@unemi.edu.ec?subject=Sistema%20Web%20Facturacion"
        target="_blank">equinterosp@unemi.edu.ec</a>
      <br>
      <p style="font-weight: bold; font-size: 13px;">Cell ⬇</p>+593 995996523<br>
      </p>
    </div><!-- .info -->

    <div class="bank">
      <p style="font-weight: bold; font-size: 13px;">Fecha de hoy ⬇</p>
      <span id="fechaActual"></span><br>
      <p style="font-weight: bold; font-size: 13px;">Factura ⬇</p><span>000000012</span><br>

      <p style="font-weight: bold; font-size: 13px;">Fecha vencimiento ⬇</p>
      <span id="fechaVencimiento"></span>
    </div><!--.bank-->

  </header>


  <div class="row section">

    <div class="col-2">
      <h1>Factura</h1>
    </div><!--.col-->

    <div class="col-2 text-right details">
      <p style="font-weight: bold;">Orden de compra ⬇</p><span>02022</span>

    </div><!--.col-->



    <div class="col-2">
      <p class="client">
        <strong style="font-weight: bold; font-size: 15px;">Facturar con datos ⬇</strong><br><br>
        <input type="text" name="cedula" id="cedulaInput" placeholder="Cédula del cliente" class="cedulaInput"><br>
        <span id="nombreCompleto" style=" font-size: 15px;"></span><br>
        <span id="tipoCliente" style=" font-size: 15px;"></span><br>
        <span id="descuento" style=" font-size: 15px;"></span>
      </p>
    </div><!--.col-->

  </div><!--.row-->



  <div class="invoicelist-body" style="margin-top: -30px;">
    <table>
      <thead>
        <th width="15%">Serial</th>
        <th width="50%">Descripción</th>

        <th width="15%">Cant.</th>
        <th width="20%">Precio</th>
        <th class="taxrelated">IVA</th>
        <th width="15%">Total</th>
      </thead>
      <tbody>
        <tr>
          <td width='5%'><a class="control removeRow" href="#">x</a> <span>12345</span></td>
          <td class="amount"><input type="text" value="1" /></td>
          <td class="rate"><input type="text" value="99" /></td>
          <td class="tax taxrelated"></td>
          <td class="sum"></td>
        </tr>
      </tbody>
    </table>
    <a class="control newRow" href="#">+ Nueva fila</a>
  </div><!--.invoice-body-->

  <div class="invoicelist-footer">
    <table>
      <tr class="taxrelated">
        <td>IVA:</td>
        <td id="total_tax"></td>
      </tr>
      <tr>
        <td><strong>Total:</strong></td>
        <td id="total_price"></td>
      </tr>
    </table>
  </div>

  <div class="note">
    <h2>Nota:</h2>
  </div><!--.note-->

  <footer class="row">
    <div class="col-1 text-center">
      <p class="notaxrelated">El monto de la factura no incluye el impuesto sobre las ventas.</p>

    </div>
  </footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="assets/bower_components/jquery/dist/jquery.min.js"><\/script>')</script>
  <script src="assets/js/main.js"></script>

  <script>
    function mostrarFechas() {
      var fechaActual = new Date();
      var fechaVencimiento = new Date();
      fechaVencimiento.setDate(fechaVencimiento.getDate() + 30); // Suma 30 días a la fecha de hoy

      // Formatear las fechas en el formato dd/mm/yyyy
      var fechaActualFormateada = `${fechaActual.getDate()}/${fechaActual.getMonth() + 1}/${fechaActual.getFullYear()}`;
      var fechaVencimientoFormateada = `${fechaVencimiento.getDate()}/${fechaVencimiento.getMonth() + 1}/${fechaVencimiento.getFullYear()}`;

      // Mostrar las fechas en los elementos span
      document.getElementById("fechaActual").textContent = fechaActualFormateada;
      document.getElementById("fechaVencimiento").textContent = fechaVencimientoFormateada;
    }

    // Llamar a la función al cargar la página
    mostrarFechas();


  
  </script>
  <script>
    document.getElementById("cedulaInput").addEventListener("input", function() {
      var cedula = this.value;
      if (cedula.length === 10) {
        var dataCliente = JSON.parse(localStorage.getItem("KEY_dataCliente"));
        if (dataCliente) {
          var clienteEncontrado = dataCliente.find(cliente => cliente.KEY_dni === cedula);
          if (clienteEncontrado) {
            document.getElementById("nombreCompleto").textContent = clienteEncontrado.KEY_first_name + " " + clienteEncontrado.KEY_last_name;
            document.getElementById("tipoCliente").textContent = clienteEncontrado.KEY_limit ? "VIP" : "Regular";
            document.getElementById("descuento").textContent = clienteEncontrado.KEY_limit ? clienteEncontrado.KEY_limit : clienteEncontrado.KEY_discount;
          } else {
            alert("NO EXISTE");
          }
        } else {
          alert("No hay datos de clientes almacenados.");
        }
      } else {
        // Limpiar los spans si la cédula no tiene 10 dígitos
        document.getElementById("nombreCompleto").textContent = "";
        document.getElementById("tipoCliente").textContent = "";
        document.getElementById("descuento").textContent = "";
      }
    });
    </script>
    
    

</body>

</html>